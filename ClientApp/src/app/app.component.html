<h1>User list</h1>
<input type="button"
       class="btn btn-default"
       value="Add user"
       (click)="add()" />
<table *ngIf="tableMode; else create"
       class="table table-striped">
  <thead>
    <tr>
      <td>User name</td>
      <td>User last name</td>
      <td>Age</td>
      <td></td>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let currentUser of users">
      <ng-template [ngIf]="user?.id != currentUser.id" [ngIfElse]="edit">
        <td>{{currentUser?.userName}}</td>
        <td>{{currentUser?.userLastName}}</td>
        <td>{{currentUser?.age}}</td>
        <td>
          <button class="btn btn-sm btn-primary"
                  (click)="editUser(currentUser)">
          Edit
          </button>
          <button class="btn btn-sm btn-danger"
                  (click)="delete(currentUser)">
          Delete
          </button>
        </td>
      </ng-template>
    </tr>
  </tbody>
</table>

<ng-template #edit>
  <td>
    <input type="text"
           [(ngModel)]="user.userName"
           class="form-control" />
  </td>
  <td>
    <input type="text"
           [(ngModel)]="user.userLastName"
           class="form-control" />
  </td>
  <td>
    <input type="number"
           [(ngModel)]="user.age"
           class="form-control" />
  </td>
  <td>
    <input type="button"
           value="Save"
           (click)="save()"
           class="btn btn-sm btn-success" />
    <input type="button"
           value="Cancel"
           (click)="cancel()"
           class="btn btn-sm btn-warning" />
  </td>
</ng-template>

<ng-template #create>
  <div class="form-group">
    <label>User name</label>
    <input type="text"
           [(ngModel)]="user.userName"
           class="form-control" />
  </div>
  <div class="form-group">
    <label>User last name</label>
    <input type="text"
           [(ngModel)]="user.userLastName"
           class="form-control" />
  </div>
  <div class="form-group">
    <label>Age</label>
    <input type="number"
           [(ngModel)]="user.age"
           class="form-control" />
  </div>
  <div>
    <input type="button"
           value="Save"
           (click)="save()"
           class="btn btn-success" />
    <input type="button"
           value="Cancel"
           (click)="cancel()"
           class="btn btn-warning" />
  </div>
</ng-template>